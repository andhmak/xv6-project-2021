Τα cowtest, usertests περνάνε, αλλά στο μηχάνημά μου το make grade κάνει timeout, άρα υπάρχει μια πιθανότητα να το κάνει και σε μηχάνημα της σχολής.

Έχουν τροποποιηθεί τα εξής αρχεία:

defs.h:
Έχουν προστεθεί κάποιοι παραπάνω ορισμοί, συμπεριλαμβανομένου του ορισμού του τύπου του καινούργιου struct που περιέχει το reference count, και
includes στο τέλος για να μπορούν να χρησιμοποιούνται σε όλα τα αρχεία.

spinlock.h:
Έχει προστεθεί ένα "#pragma once" για να μπορεί να γίνει include στο defs.h (χρειάζεται για το lock του νέου struct).

memlayout.h:
Έχει προστεθεί ένα "#pragma once" για να μπορεί να γίνει include στο defs.h (χρειάζεται για το PHYSTOP στο νέο struct).

riscv.h:
Έχει προστεθεί ένα define PTE_COW, που ορίζει ένα από τα ελεύθερα bit στα flags του pte που χρησιμοποιείται για να δείξει αν μια σελίδα είναι CoW.

kalloc.c:
Εκεί ορίζεται η μεταβλητή ref_arr, που χρησιμοποιεί τον τύπο του νέου struct, που κρατάει την πληροφορία για το πλήθος αναφορών κάθε σελίδας.
Η kinit έχει τροποποιηθεί για να αρχικοποιεί και το lock του ref_arr.
Η kfree έχει τροποποιηθεί για να μειώνει το reference count της σελίδας και να την απελευθερώνει μόνο αν μετά την μείωση γίνει 0.
Η kalloc έχει τροποποιηθεί ώστε να αρχικοποιεί το reference count της νέας σελίδας σε 1.

vm.c:
Έχει δηλωθεί η μεταβλητή ref_arr που ορίζεται στο kalloc.c ως extern.
Έχει τροποποιηθεί η uvmcopy ώστε, αντί να βάζει νέες φυσικές σελίδες στις νέες εγγραφές, να βάζει να δείχνουν στις παλιές, να αυξάνει το αντίστοιχο
reference count κατά 1, και να ορίζει και την παλιά και την καινούργια εγγραφη ως read-only και, αν δεν ήταν πριν read-only, ως CoW.
Έχει τροποποιηθεί η copyout ώστε να προσομοιώνει την λειτουργία της usertrap στην περίπτωση CoW.

trap.c:
Έχει τροποποιηθεί η usertrap ώστε να